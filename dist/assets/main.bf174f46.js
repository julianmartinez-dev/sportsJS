import{I as m}from"./funciones.1d7e1187.js";import{c as x,l as p,a as g,b as y}from"./Interface.cd27c07d.js";let r=[];const C=document.querySelector("#dark-mode"),u=document.querySelector("#carrito"),q=document.querySelector("#subtotal"),f=document.querySelectorAll(".cantidad-articulos"),v=document.querySelector("#vaciar-carrito"),h=document.querySelector("#filtros"),k=document.querySelector("#resultado"),L="https://622c19f3087e0e041e0343ba.mockapi.io/productos";document.addEventListener("DOMContentLoaded",()=>{w(),S()});function w(){C.addEventListener("click",x),u.addEventListener("click",A),h.addEventListener("click",D),v.addEventListener("click",()=>{r=[],p(u),i(),s()})}const S=async()=>{try{const e=await(await fetch(L)).json(),o=new m(e);for(;o.hasNext();){const c=o.next();g(c,b)}}catch(t){console.log(t)}};function b(t){if(t.target.classList.contains("agregar-carrito")){const e=t.target.parentElement;E(e),s()}}function A(t){if(t.target.classList.contains("borrar-item")){const e=t.target.getAttribute("data-id");r=r.filter(o=>o.id!==e),y(r),i(),s()}}function E(t){const e=t.querySelector("h2").textContent,o=parseInt(t.querySelector("div .precio").textContent.slice(1)),c=t.querySelector("label").getAttribute("data-id"),a={titulo:e,precio:o,id:c,cantidad:1};r.some(l=>l.id===a.id)?r=[...r.map(n=>(n.id===a.id&&n.cantidad++,n))]:r=[...r,a],y(r),i()}function i(){let t=r.reduce((e,o)=>e+o.cantidad,0);f[0].textContent=t,f[1].textContent=`Cantidad de articulos: ${t}`}function s(){let t=r.reduce((e,o)=>e+o.precio*o.cantidad,0);q.innerText=`Subtotal: $${t}`}async function D(t){if(t.target.getAttribute("data-filtro")!==null){const e=t.target.getAttribute("data-filtro"),o=t.target.textContent;if(p(k),e==="all"){S(),document.querySelector("#titulo-lista").textContent="";return}const c=await P(e,o);document.querySelector("#titulo-lista").textContent=`Filtro: ${o}`;const a=new m(c);for(;a.hasNext();){const d=a.next();g(d,b)}}}async function P(t,e){const o=`https://622c19f3087e0e041e0343ba.mockapi.io/productos?${t}=${e}`;return await(await fetch(o)).json()}
