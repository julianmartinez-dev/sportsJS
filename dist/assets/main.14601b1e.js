import{c as C,l as f,I as g,a as y,b as S}from"./Interface.d5aec304.js";import{o as q,f as v}from"./API.47651970.js";let r=[];const L=document.querySelector("#dark-mode"),u=document.querySelector("#carrito"),k=document.querySelector("#subtotal"),m=document.querySelectorAll(".cantidad-articulos"),p=document.querySelector("#vaciar-carrito"),P=document.querySelector("#filtros"),A=document.querySelector("#resultado");document.addEventListener("DOMContentLoaded",()=>{E(),x()});function E(){L.addEventListener("click",C),u.addEventListener("click",h),P.addEventListener("click",D),p.addEventListener("click",()=>{r=[],f(u),i(),s()})}const x=async()=>{try{const t=await q(),e=new g(t);for(;e.hasNext();){const o=e.next();y(o,b)}}catch(t){console.log(t)}};function b(t){if(t.target.classList.contains("agregar-carrito")){const e=t.target.parentElement;w(e),s()}}function h(t){if(t.target.classList.contains("borrar-item")){const e=t.target.getAttribute("data-id");r=r.filter(o=>o.id!==e),S(r),i(),s()}}function w(t){const e=t.querySelector("h2").textContent,o=parseInt(t.querySelector("div .precio").textContent.slice(1)),n=t.querySelector("label").getAttribute("data-id"),a={titulo:e,precio:o,id:n,cantidad:1};r.some(l=>l.id===a.id)?r=[...r.map(c=>(c.id===a.id&&c.cantidad++,c))]:r=[...r,a],S(r),i()}function i(){let t=r.reduce((e,o)=>e+o.cantidad,0);m[0].textContent=t,m[1].textContent=`Cantidad de articulos: ${t}`}function s(){let t=r.reduce((e,o)=>e+o.precio*o.cantidad,0);k.innerText=`Subtotal: $${t}`}async function D(t){if(t.target.getAttribute("data-filtro")!==null){const e=t.target.getAttribute("data-filtro"),o=t.target.textContent;if(f(A),e==="all"){x(),document.querySelector("#titulo-lista").textContent="";return}const n=await v(e,o);document.querySelector("#titulo-lista").textContent=`Filtro: ${o}`;const a=new g(n);for(;a.hasNext();){const d=a.next();y(d,b)}}}
